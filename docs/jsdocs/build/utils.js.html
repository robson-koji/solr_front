

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: utils.js | Javascript Docs Solr Front</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 160px; height: 52px">
        
            <a href="/buscador/docs" rel="noopener noreferrer" target="_blank">
                <img src="/static-files/solr_front/img/logo_buscador.jpg" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Javascript Docs Solr Front</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="api-tab">
                <a href="#"><h4>API</h4></a>
            </li>
            <li id="examples-tab">
                <a href="#"><h4>Tutorias</h4></a>
            </li>
        </ol>
    
    <div class="lnb-api hidden"><h3>Modules</h3><ul><li><a href="module-solr_front__bv_d3.html">solr_front::bv_d3</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:solr_front::bv_d3_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-solr_front__bv_d3.html#~json_d3_glb">json_d3_glb</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-solr_front__bv_d3.html#~AnualChart">AnualChart</a></li><li><a href="module-solr_front__bv_d3.html#~barChart">barChart</a></li><li><a href="module-solr_front__bv_d3.html#~geraCharts">geraCharts</a></li><li><a href="module-solr_front__bv_d3.html#~getRender">getRender</a></li><li><a href="module-solr_front__bv_d3.html#~halfPieChart">halfPieChart</a></li><li><a href="module-solr_front__bv_d3.html#~MensalChart">MensalChart</a></li><li><a href="module-solr_front__bv_d3.html#~pegaLabel">pegaLabel</a></li><li><a href="module-solr_front__bv_d3.html#~temporalChart">temporalChart</a></li></ul></div></li><li><a href="module-solr_front__bv_facet.html">solr_front::bv_facet</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:solr_front::bv_facet_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-solr_front__bv_facet.html#~selectedFacets">selectedFacets</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-solr_front__bv_facet.html#~apresentaFacets">apresentaFacets</a></li><li><a href="module-solr_front__bv_facet.html#~constroiComponentFacetsButtons">constroiComponentFacetsButtons</a></li><li><a href="module-solr_front__bv_facet.html#~geraDropdownfacets">geraDropdownfacets</a></li><li><a href="module-solr_front__bv_facet.html#~incluiTags">incluiTags</a></li><li><a href="module-solr_front__bv_facet.html#~limpaLabelSolr">limpaLabelSolr</a></li><li><a href="module-solr_front__bv_facet.html#~makeDataComponentFacet">makeDataComponentFacet</a></li><li><a href="module-solr_front__bv_facet.html#~removeAllElementSelectedFacets">removeAllElementSelectedFacets</a></li></ul></div></li><li><a href="module-solr_front__bv_querybuilder.html">solr_front::bv_querybuilder</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:solr_front::bv_querybuilder_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-solr_front__bv_querybuilder.html#~instituicao_sede_opt">instituicao_sede_opt</a></li><li><a href="module-solr_front__bv_querybuilder.html#~selecionados">selecionados</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-solr_front__bv_querybuilder.html#~ajax_solr">ajax_solr</a></li><li><a href="module-solr_front__bv_querybuilder.html#~geraRoot">geraRoot</a></li><li><a href="module-solr_front__bv_querybuilder.html#~getBuscaRealizada">getBuscaRealizada</a></li><li><a href="module-solr_front__bv_querybuilder.html#~injectAutocompleteTag">injectAutocompleteTag</a></li><li><a href="module-solr_front__bv_querybuilder.html#~reverse_filter">reverse_filter</a></li></ul></div></li><li><a href="module-solr_front__functions.html">solr_front::functions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:solr_front::functions_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-solr_front__functions.html#~apresentaPublicacaoes">apresentaPublicacaoes</a></li><li><a href="module-solr_front__functions.html#~collectionsRelacionadas">collectionsRelacionadas</a></li><li><a href="module-solr_front__functions.html#~constroiComponentDocumentos">constroiComponentDocumentos</a></li><li><a href="module-solr_front__functions.html#~constroiComponentTotalizadores">constroiComponentTotalizadores</a></li><li><a href="module-solr_front__functions.html#~constroiComponentTotalizadoresRelacionados">constroiComponentTotalizadoresRelacionados</a></li><li><a href="module-solr_front__functions.html#~criaSelectPivotTable">criaSelectPivotTable</a></li><li><a href="module-solr_front__functions.html#~criaSelectSankeyChart">criaSelectSankeyChart</a></li><li><a href="module-solr_front__functions.html#~define_busca">define_busca</a></li><li><a href="module-solr_front__functions.html#~getData">getData</a></li><li><a href="module-solr_front__functions.html#~getFakeData">getFakeData</a></li><li><a href="module-solr_front__functions.html#~getInitialSearch">getInitialSearch</a></li><li><a href="module-solr_front__functions.html#~getTotalizadores">getTotalizadores</a></li><li><a href="module-solr_front__functions.html#~montaTotal">montaTotal</a></li></ul></div></li><li><a href="module-solr_front__main.html">solr_front::main</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:solr_front::main_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-solr_front__main.html#~jsonPrettyPrint">jsonPrettyPrint</a></li></ul></div></li><li><a href="module-solr_front__utils.html">solr_front::utils</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:solr_front::utils_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-solr_front__utils.html#~contains">contains</a></li><li><a href="module-solr_front__utils.html#~extractLast">extractLast</a></li><li><a href="module-solr_front__utils.html#~htmlToElement">htmlToElement</a></li><li><a href="module-solr_front__utils.html#~shuffle">shuffle</a></li><li><a href="module-solr_front__utils.html#~split">split</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#Component">Component</a></li><li><a href="global.html#DocsComponent">DocsComponent</a></li><li><a href="global.html#DropdownFormComponentExec">DropdownFormComponentExec</a></li><li><a href="global.html#FacetComponentExec">FacetComponentExec</a></li><li><a href="global.html#TotaisComponent">TotaisComponent</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* @file Funções de proposito geral, idependentes da aplicação
* @module solr_front::utils
*/

/**
* Função separa string nas virgulas
* @param {String} val - Frase para tratar
* @return {Array} - Array com as palavras divididas na virgula
*/
function split( val ) {
  return val.split( /,\s*/ );
}

/**
* Função extrai ultimo termo do texto
* @param {String} term - Texto para extração
* @return {String} - Retorna ultima palavra
*/
function extractLast( term ) {
  return split( term ).pop();
}

function getCookie(name) {
      var cookieValue = null;
      if (document.cookie &amp;&amp; document.cookie != '') {
          var cookies = document.cookie.split(';');
          for (var i = 0; i &lt; cookies.length; i++) {
              var cookie = jQuery.trim(cookies[i]);
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0, name.length + 1) == (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
    }
  }

/**
* Função  verifica se texto esta contido em outro
* @param {String} value - Texto onde será efetuado a busca
* @param {String} searchFor - Texto que será buscado
* @return {Boll}  - Retorna Verdadeiro ou falso
*/
function contains(value, searchFor)
    {
        var v = (value || '').toString().toLowerCase();
        var v2 = searchFor;
        if (v2) {
            v2 = v2.toLowerCase();
        }
        return v.indexOf(v2) > -1;
    }

/**
* Função embaralha um array
* @param {Array} array - Array que tera seu conteudo embaralhado
* @return {Array} - O Array embralhado
*/

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

/* função jquery para ordenar elementos */
function getSortMethod(){

  var _args = [].slice.call(arguments);

        return function(a, b){

          for(var i=0; i &lt; _args.length; i++){

            var x = Object.keys(_args)[i]

            var index = _args[x].substring(1)
            var ax = a[index];
            var bx = b[index];

            var cx;

            ax = typeof ax == "string" ? ax.toLowerCase() : ax / 1;
            bx = typeof bx == "string" ? bx.toLowerCase() : bx / 1;

            if(_args[x].substring(0,1) == "-"){cx = ax; ax = bx; bx = cx;}
            if(ax != bx){return RemoveEspecialCharMask(ax) &lt; RemoveEspecialCharMask(bx) ? -1 : 1;}

          }
        }
}

Array.prototype.sortBy = function() {

  //tratamento criado porque o boxsplot gera erro ao tentar utilizar um objeto não array em um Array
  try {
    var lista =  this.sort( getSortMethod.apply(null, arguments));
    return lista
  }
  catch(err) {
    return this
  }

}


//remove strings de array baseado em regex
function removeMatching(originalArray, regex) {
    var j = 0;
    while ( j &lt; originalArray.length ) {
        // /elimina espaços em branco e pipes para melhor funcionamento do regex
        var chave = originalArray[j].replace(/ /g, '_').replace(/\|/g, '_-_')
        if ( regex.test(chave) ){
            originalArray.splice(j, 1);
        }
        else{
            j++;
        }
    }
    return originalArray;
}

/* Remove caracters acentuados e especiais da string no navegador IE (mais lento )*/
function RemoveEspecialCharMask(especialChar){
        if(typeof especialChar == "string" ){

            especialChar = especialChar.replace(/[áàãâä]/i,'a');
            especialChar = especialChar.replace(/[éèêë]/i, 'e');
            especialChar = especialChar.replace(/[íìîï]/i, 'i');
            especialChar = especialChar.replace(/[óòõôö]/i, 'o');
            especialChar = especialChar.replace(/[úùûü]/i, 'u');
            especialChar = especialChar.replace(/[ç]/i, 'c');
            especialChar = especialChar.replace(/[^a-z0-9]/i, '_');
            especialChar = especialChar.replace(/_+/, '_');

        }
        return especialChar;

}






$.fn.ordenaElementByAtribute= function(element,atribute){

  var ordenado = $(this).find(element).sort(function(a,b){

    var an = a.getAttribute(atribute),
        bn = b.getAttribute(atribute);

    if( an > bn){
      return 1;
    }

    if (an &lt; bn){
      return -1;
    }
    return 0;

  })

  $(this).find(element).detach()
  $(this).append(ordenado)

}

/**
 * @param {String} HTML representing a single element
 * @return {Element}
 */
function htmlToElement(html) {
    var template = document.createElement('template');
    html = html.trim(); // Never return a text node of whitespace as the result
    template.innerHTML = html;

    if(typeof template.content != 'undefined'){

      return template.content.firstElementChild;
    }else{
      return template.children[0]
    }
}


function GetBrowserInfo() {
    var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;

    var isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+
    var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;

    var isChrome = !!window.chrome &amp;&amp; !isOpera;              // Chrome 1+
    var isIE = /*@cc_on!@*/false || !!document.documentMode;   // At least IE6

    if (isOpera) {
        return 1;
    }
    else if (isFirefox) {
        return 2;
    }
    else if (isChrome) {
        return 3;
    }
    else if (isSafari) {
        return 4;
    }
    else if (isIE) {
        return 5;
    }
    else {
        return 0;
    }
}
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="/static-files/solr_front/img/logo_buscador.jpg" style="width: 160px; height: 52px">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
